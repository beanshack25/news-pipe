<script type="module">
import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";

const treeData = {
    "name": "Root",
    "children": [
        {
            "name": "Branch 1",
            "children": [
                { "name": "Leaf 1A" },
                { "name": "Leaf 1B" }
            ]
        },
        {
            "name": "Branch 2",
            "children": [
                { "name": "Leaf 2A" },
                { "name": "Leaf 2B" }
            ]
        }
    ]
};

const width = 800, height = 600;
const svg = d3.select("svg")
    .attr("width", width)
    .attr("height", height)
    .append("g")
    .attr("transform", "translate(50,50)");

// Create a D3 hierarchy from data
const root = d3.hierarchy(treeData);

// Create a tree layout
const treeLayout = d3.tree().size([width - 100, height - 200]);
treeLayout(root);

const findX = (d) => width - 100 - d.y
const findY = (d) => d.x - 100

// Draw links (edges between nodes)
svg.selectAll("line")
    .data(root.links())
    .enter()
    .append("line")
    .attr("x1", d => findX(d.source))
    .attr("y1", d => findY(d.source))
    .attr("x2", d => findX(d.target))
    .attr("y2", d => findY(d.target))
    .attr("stroke", "black");

// Draw nodes (circles)
svg.selectAll("circle")
    .data(root.descendants())
    .enter()
    .append("circle")
    .attr("cx", d => findX(d))
    .attr("cy", d => findY(d))
    .attr("r", 5)
    .attr("fill", "blue");

// Add labels
svg.selectAll("text")
    .data(root.descendants())
    .enter()
    .append("text")
    .attr("x", d => findX(d) + 10)
    .attr("y", d => findY(d) + 5)
    .text(d => d.data.name)
    .style("font-size", "12px");

</script>

<svg width="800" height="600"></svg>